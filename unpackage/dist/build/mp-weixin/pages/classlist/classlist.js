"use strict";const e=require("../../common/vendor.js"),a=require("../../api/apis.js"),t=require("../../utils/common.js");if(require("../../utils/request.js"),!Array){e.resolveComponent("uni-load-more")()}Math;const s={__name:"classlist",setup(s){const i=e.ref([]),l=e.ref(!1),o={pageNum:1,pageSize:12};let n="";e.onLoad((a=>{const{id:s,name:i,type:l}=a;s?(l&&(o.type=l),s&&(o.classid=s),n=i,e.index.setNavigationBarTitle({title:i}),r(o)):t.goToHome()}));const r=async t=>{let s;t.classid&&(s=await a.apiGetClassList({...t})),t.type&&(s=await a.apiGetHistoryList({...t})),i.value=i.value.concat(s.data),e.index.setStorageSync("storeClassList",i.value),o.pageSize>s.data.length&&(l.value=!0)};return e.onReachBottom((()=>{l.value||(o.pageNum++,r(o))})),e.onShareAppMessage((()=>({title:"呆桃的小屋",path:`/pages/classlist/classlist?id=${o.classid}&name=${n}`}))),e.onShareTimeline((()=>({title:"呆桃的小屋",query:`id=${o.classid}&name=${n}`}))),e.onUnload((()=>{e.index.removeStorageSync("storeClassList")})),(a,t)=>e.e({a:!i.value.length&&!l.value},i.value.length||l.value?{}:{b:e.p({status:"loading"})},{c:e.f(i.value,((e,a,t)=>({a:e.smallPicurl,b:`/pages/preview/preview?id=${e._id}`,c:e._id}))),d:i.value.length||l.value},i.value.length||l.value?{e:e.p({status:l.value?"noMore":"loading"})}:{})}},i=e._export_sfc(s,[["__scopeId","data-v-fc067e2b"]]);s.__runtimeHooks=6,wx.createPage(i);
